/**!
* The default styles for Mathbook-based textbooks.
*
* @author Michael DuBois (michael@michael-dubois.com)
*/

// Note: single line comments like this are not included in css output
//
// Naming Conventions
// ------------------
// Unfortunately, SASS has adopted the dash-separated scheme for variables.
// That is, variables should take the following form: $my-awesome-var
//
// The portions of a variable name should be ordered from general to specific.
// i.e. $color-button-primary not $primary-button-color
//
// Whenever possible, avoid variable names that describe their current value.
// i.e. use $color-button-primary instead of $color-button-red
// This is preferrable because variables are...variable. The value may change.

// Global Variables
@import "colorscheme-mathbook";
@import "variables";
@import "typography";
@import "numbering";
@import "theorem-env";
@import "compass/reset/utilities";
@include reset-html5();

html, body, html body {
    margin:0;
    padding:0;
}

body, html body {
    /* Override this in <style> tag if necessary */
    counter-reset:chapter;
}

.theorem {
    @include theorem-env();
}

header address {
    padding:0;
    margin:0;
    line-height: inherit;
    font-style: inherit;
}

@mixin section-title {
    & > .heading > .title {
        // Override mathbook.css
        margin-left:0;
        margin-right:0;
        
        @content;
    }
}

@mixin section-heading {
    & > .heading {
        // Override mathbook.css
        margin-left:0;
        margin-right:0;
        
        @content;
    }
}

body, html body {
    background:#ccc;
}


.knowl-output {
    @import "knowl";
    @import "exercises";
    @include exercise($knowl-border-color);
    @include exercisegroup($knowl-border-color, darken($knowl-border-color, 0%));
}

.MathJax_Display {
    /* Allow mobile users to scroll equations 
     * horizontally when they don't fit on the screen 
     */
    overflow-x:auto;
    overflow-y:hidden;
    padding-bottom:1px;
}

.container {
    //max-width:960px;
    //margin:0 auto;
}

.page {
    max-width:960px;
    //margin:0 auto;
}

#masthead {
    @import "masthead.scss";
}

#navbar {
    $navbar-border-width: 1px;

    & { 
        background:$navbar-bg;
        border-bottom:$navbar-border-width solid darken($toc-bg, 15%);
        z-index:99999;
    }

    &.scrolling-nav-loaded {
    }

    &.scrolling-nav-persistent {
        position:fixed;
        top:0;
        left:0;
        right:0;
        @include box-shadow(rgba(0,0,0,.5) 0 2px 5px);
    }

    .navbar-item {
        $border-color: darken($navbar-bg, 15%);

        position:relative;
        color:$navbar-color;
        @include inline-block();

        border-right:1px solid $border-color;

        &:last-child {
            border-right:none;
        }

        &:first-child {
            border-right:1px solid $border-color;
        }

        .navbar-item-text {
            color:inherit;
            font-size:1em;
            margin:0;
            line-height:2.5;
            /*Padding here so that item width can be set explicitly*/
            padding:0 $h-pad;
        }

        &.active {
            @include box-shadow(inset 0 3px 8px rgba(black,.3));
        }
    }

    #toc-navbar-item {
        width:$toc-width;

        .navbar-item-text:before {
            opacity:.8;
        }

        @media only screen and (max-width: $screen-sm-min) {
            width:auto;
            // TODO define tablet/phone appearance
        }
    }

    #toc {
        @import "nav.scss";

        & {
            position: absolute;
            margin-top:$navbar-border-width;
            top:100%;
            left:0;
    //        @include box-shadow(inset -5px 0px 5px -5px rgba(black,.5));
        }

        @media only screen and (max-width: $screen-sm-min) {
            display:none;
        }
    }
}


/**
 * highlighting menu entries (if their respective blueprint overwirtes 
 * the body_class variable!)
 */
body.mwf #sidebar a.mwf { background: #BFB; }
body.cmf #sidebar a.cmf { background: #BFB; }
body.local_fields #sidebar a.local_fields { background: #BFB; }

.main {
    // Not sure about this one...we'll see
    min-height:100%;

    display:block;
    width: auto;
    margin: 0 auto;
    padding:0;

    background:white;

    border:1px solid #ccc;
    /* transparent instead of none to fix heading margin-top box-model issue */
    border-top-color:transparent;
    border-bottom-color:transparent;
    @include box-shadow(0 5px 5px rgba(0,0,0,.5));

    .has-toc & {
        margin:0 auto;
        margin-left:$toc-width;

        @media only screen and (max-width: $screen-sm-min) {
            // default to toc collapsed
            margin-left:0;
        }
    }

}

.main > .article, .main > .section, .main > #content {

    & {
        margin:3em;
        max-width:100%; /* override, we'll handle this elsewhere */
    }

    @include section-title {
      font-size: $font-size-h2;  
    }

    @include section-heading {}
    
    .section, .subsection {

        @include section-title {
            font-size: $font-size-h4;
        }

        @include section-heading {}

        .subsection {
            @include section-title {
                font-size:$font-size-h5;
            }

            @include section-heading {}
        }
    }
}
